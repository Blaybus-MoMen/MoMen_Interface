# ====================================================================
# ACI 3.1 MVP Application Properties
# ====================================================================

# Application
spring.application.name=Blaybus

# ====================================================================
# Database Configuration (MariaDB)
# ====================================================================
spring.datasource.driver-class-name=org.mariadb.jdbc.Driver
spring.datasource.url=jdbc:mariadb://localhost:3306/blaybus?useUnicode=true&characterEncoding=utf8mb4&serverTimezone=Asia/Seoul
spring.datasource.username=root
spring.datasource.password=1234

# Connection Pool (HikariCP)
spring.datasource.hikari.maximum-pool-size=10
spring.datasource.hikari.minimum-idle=5
spring.datasource.hikari.connection-timeout=30000
spring.datasource.hikari.idle-timeout=600000
spring.datasource.hikari.max-lifetime=1800000

# ====================================================================
# JPA / Hibernate Configuration
# ====================================================================
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.format_sql=true
spring.jpa.properties.hibernate.use_sql_comments=true
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MariaDBDialect
spring.jpa.open-in-view=false

# JPA Auditing
spring.jpa.properties.hibernate.enable_lazy_load_no_trans=false

# ====================================================================
# JWT Configuration
# ====================================================================
# IMPORTANT: Change this secret key in production!
jwt.secret=Blaybus-3.1-MVP-Super-Secret-Key-Please-Change-This-In-Production-Min-256-Bits
jwt.access-token-validity=1800000
# 30분 = 30 * 60 * 1000 = 1,800,000 milliseconds
jwt.refresh-token-validity=1209600000
# 14일 = 14 * 24 * 60 * 60 * 1000 milliseconds

# ====================================================================
# Spring Security
# ====================================================================
spring.security.user.name=admin
spring.security.user.password=admin

# ====================================================================
# Logging
# ====================================================================
logging.level.root=INFO
logging.level.com.eduverse=DEBUG
logging.level.org.springframework.web=DEBUG
logging.level.org.springframework.security=DEBUG
logging.level.org.hibernate.SQL=DEBUG
logging.level.org.hibernate.type.descriptor.sql.BasicBinder=TRACE
logging.pattern.console=%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n
logging.pattern.file=%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n
logging.file.name=logs/Blaybus.log

# ====================================================================
# Server Configuration
# ====================================================================
server.port=8080
server.servlet.context-path=/
server.error.include-message=always
server.error.include-binding-errors=always
server.error.include-stacktrace=on_param
server.error.include-exception=true

# Tomcat - URL 인코딩된 특수 문자 허용
server.tomcat.relaxed-path-chars=|,{,},[,]
server.tomcat.relaxed-query-chars=|,{,},[,]
tomcat.util.http.parser.HttpParser.requestTargetAllow=|,{,}

# ====================================================================
# Swagger / OpenAPI Configuration
# ====================================================================
springdoc.api-docs.path=/api/v1/v3/api-docs
springdoc.swagger-ui.path=/api/v1/swagger-ui.html
springdoc.swagger-ui.enabled=true
springdoc.swagger-ui.operations-sorter=method
springdoc.swagger-ui.tags-sorter=alpha
springdoc.swagger-ui.doc-expansion=none

# ====================================================================
# Actuator Configuration
# ====================================================================
management.endpoints.web.exposure.include=health,info,metrics,prometheus
management.endpoint.health.show-details=when-authorized
management.metrics.export.prometheus.enabled=true

# ====================================================================
# Encoding
# ====================================================================
spring.http.encoding.charset=UTF-8
spring.http.encoding.enabled=true
spring.http.encoding.force=true

# ====================================================================
# Jackson Configuration
# ====================================================================
spring.jackson.serialization.write-dates-as-timestamps=false
spring.jackson.time-zone=Asia/Seoul
spring.jackson.default-property-inclusion=non_null

# ====================================================================
# File Upload Configuration
# ====================================================================
spring.servlet.multipart.enabled=true
spring.servlet.multipart.max-file-size=10MB
spring.servlet.multipart.max-request-size=10MB

# ====================================================================
# Redis Configuration
# ====================================================================
spring.data.redis.host=localhost
spring.data.redis.port=6379
spring.data.redis.password=
spring.data.redis.timeout=2000ms
spring.data.redis.lettuce.pool.max-active=8
spring.data.redis.lettuce.pool.max-idle=8
spring.data.redis.lettuce.pool.min-idle=0

# ====================================================================
# Cache Configuration
# ====================================================================
spring.cache.type=redis

# ====================================================================
# Batch Configuration (MVP에서는 미사용)
# ====================================================================
spring.batch.jdbc.initialize-schema=never
spring.batch.job.enabled=false

# ====================================================================
# Profile
# ====================================================================
spring.profiles.active=local

# ====================================================================
# OpenAI API Configuration
# ====================================================================
# OpenAI API Key (환경 변수 사용 권장: export OPENAI_API_KEY=sk-...)
# 로컬 개발 시에만 여기에 입력, 프로덕션에서는 환경 변수 사용 필수
openai.api.key=${OPENAI_API_KEY:}
openai.api.base-url=https://api.openai.com/v1

# OpenAI 모델 설정
openai.model.embedding=text-embedding-3-small
openai.model.chat=gpt-4o-mini
openai.model.temperature=0.3

# ====================================================================
# Gemini API Configuration (REST API 직접 호출)
# ====================================================================
# Gemini API Key (환경 변수 사용 권장: export GEMINI_API_KEY=your-key)
# Google AI Studio에서 발급: https://makersuite.google.com/app/apikey
gemini.api.key=${GEMINI_API_KEY:}
gemini.api.base-url=https://generativelanguage.googleapis.com/v1beta
gemini.api.model=gemini-2.0-flash-exp
gemini.api.temperature=0.7
gemini.api.max-tokens=2048
gemini.project-id=${GEMINI_PROJECT_ID:0677787784}

# ====================================================================
# Imagen 3 API Configuration (이미지 생성)
# ====================================================================
# Service Account (keys.json) 사용
imagen.project-id=${IMAGEN_PROJECT_ID:gen-lang-client-0677787784}
imagen.api.location=us-central1
imagen.api.model=imagen-3.0-generate-001

# ====================================================================
# Runway Gen-3 API Configuration (비디오 생성)
# ====================================================================
# Runway API Key (환경 변수 사용 권장: export RUNWAY_API_KEY=your-key)
# Runway 개발자 포털에서 발급: https://dev.runwayml.com/
runway.api.key=${RUNWAY_API_KEY:}
runway.api.base-url=https://api.dev.runwayml.com
runway.api.version=2024-11-06
# Runway API Model
# 허용값: gen3a_turbo, gen4.5, veo3, veo3.1, veo3.1_fast
runway.api.model=gen3a_turbo

# ====================================================================
# Email Configuration (SMTP)
# ====================================================================
# Gmail SMTP 설정 예시
# Gmail 계정 설정: https://myaccount.google.com/apppasswords
# 앱 비밀번호 생성 후 아래 password에 입력
spring.mail.host=smtp.gmail.com
spring.mail.port=587
spring.mail.username=your-email@gmail.com
spring.mail.password=your-app-password
spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.smtp.starttls.enable=true
spring.mail.properties.mail.smtp.starttls.required=true
spring.mail.properties.mail.smtp.connectiontimeout=5000
spring.mail.properties.mail.smtp.timeout=5000
spring.mail.properties.mail.smtp.writetimeout=5000

# 발신자 정보
spring.mail.from=Sandwitch Team <noreply@sandwitch.com>
